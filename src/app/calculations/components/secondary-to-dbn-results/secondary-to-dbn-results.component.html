<ng-container *ngIf="calculation">
  <div class="title">
    <h1>Sequence & secondary structure topology derived from file {{ calculation.filename }}</h1>
  </div>

  <div class="top-btns">
    <button mat-stroked-button (click)="selectAll()">{{ allSelected() ? 'Unselect' : 'Select' }} all data</button>
    <button mat-stroked-button (click)="download()" [disabled]="!selected?.isAnythingSelected()">Download selected</button>
    <div class="info">
      <mat-icon>info</mat-icon>
      <p>RNApdbee provides an easy way to download calculation results. Use checkboxes or buttons to select interesting elements of the calculation. After selecting at least one, you will be able to download it in compressed .zip format.</p>
    </div>
  </div>

  <div class="reanalyze">
    <app-reanalyze-panel [(ngModel)]="reanalyzePanelExpanded">
      <app-secondary-to-dbn-params-form [params]="calculation.results[0].params" (paramChange)="onParamsChange($event)">
      </app-secondary-to-dbn-params-form>
      <mat-divider></mat-divider>
      <app-submit-button [callback]="reanalyzeCallback" (buttonSubmit)="onSubmit($event)"></app-submit-button>
    </app-reanalyze-panel>
  </div>

  <div class="results">
    <div class="result" *ngFor="let result of calculation.results; let i = index">
      <app-secondary-result
        [(ngModel)]="selected!.fields[i]"
        [result]="result">
      </app-secondary-result>        
    </div>
  </div>
</ng-container>
